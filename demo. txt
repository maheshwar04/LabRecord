@PutMapping("/{id}")
public ResponseEntity<Product> updateProduct(@PathVariable Long id, @RequestBody Product updatedProduct) {
    return productService.updateProduct(id, updatedProduct)
            .map(ResponseEntity::ok)
            .orElse(ResponseEntity.notFound().build());
}

public Optional<Product> updateProduct(Long id, Product updatedProduct) {
    return productRepository.findById(id).map(existingProduct -> {
        if (updatedProduct.getName() != null) existingProduct.setName(updatedProduct.getName());
        if (updatedProduct.getDescription() != null) existingProduct.setDescription(updatedProduct.getDescription());
        if (updatedProduct.getPrice() != null) existingProduct.setPrice(updatedProduct.getPrice());
        if (updatedProduct.getProductType() != null) existingProduct.setProductType(updatedProduct.getProductType());
        if (updatedProduct.getImageUrl() != null) existingProduct.setImageUrl(updatedProduct.getImageUrl());
        return productRepository.save(existingProduct);
    });
}